{"version":3,"sources":["webpack:///./src/views/shop/components/Good.vue?5cde","webpack:///src/views/shop/components/Good.vue","webpack:///./src/views/shop/components/Good.vue?9141","webpack:///./src/views/shop/components/Good.vue","webpack:///./src/views/shop/api/index.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","update","_e","staticClass","attrs","_v","_s","ref","model","value","callback","$$v","valid","expression","rules","required","notSpecial","good","$set","category","categoryList","props","numical","on","$event","crop","show","list","length","_l","item","key","deleteFile","insertGood","params","headers","langExt","srcFileSet","cropSuccess","cropUploadSuccess","cropUploadFail","staticRenderFns","components","created","loadGoodCategory","changeGood","name","watch","type","Boolean","default","title","String","Object","goodName","description","directCategoryId","price","imageUrl","userId","username","schoolId","computed","data","categoryActive","expandTrigger","label","children","checkStrictly","businessKey","fileName","smail","Authorization","localStorage","getItem","preview","methods","split","convertCategoryActive","arrays","i","console","log","json","success","$message","push","path","error","message","filter","$refs","form","validate","convertImgUrl","convertDirectCategoryId","rootCategoryId","len","imgUrl","url","index","substring","handleLeaf","undefined","component","VBtn","VCard","VCardActions","VCardText","VCardTitle","VCol","VContainer","VForm","VIcon","VImg","VList","VListItem","VListItemAction","VListItemContent","VMain","VRow","VTextField","VTextarea","gatewayApiUrl","systemConfig","listCategoryStruct","http","requestGet","listGoods","page","size","query","querystring","stringify","Date","valueOf","requestPost","deleteGood","id","requestDelete","deleteGoods","ids"],"mappings":"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","file":"js/chunk-5d71909c.934cb8ff.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-main',[(!_vm.update)?_c('v-img',{staticClass:\"bdBackground\",attrs:{\"src\":require(\"@/assets/img/1.png\"),\"height\":\"100%\",\"width\":\"100%\"}}):_vm._e(),_c('v-container',[_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-col',[_c('v-card',[_c('v-card-text',[_c('v-card-title',[_vm._v(_vm._s(_vm.update ? \"修改商品\" : \"发布商品\"))]),_c('v-form',{ref:\"form\",model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{attrs:{\"counter\":20,\"rules\":[_vm.rules.required, _vm.rules.notSpecial],\"label\":\"商品名称\",\"prepend-icon\":\"mdi-pig-variant\",\"required\":\"\"},model:{value:(_vm.good.goodName),callback:function ($$v) {_vm.$set(_vm.good, \"goodName\", $$v)},expression:\"good.goodName\"}}),_c('v-icon',[_vm._v(\"mdi-file-tree\")]),_c('el-cascader',{attrs:{\"options\":_vm.category.categoryList,\"placeholder\":\"请选择分类\",\"props\":_vm.category.props},model:{value:(_vm.category.categoryActive),callback:function ($$v) {_vm.$set(_vm.category, \"categoryActive\", $$v)},expression:\"category.categoryActive\"}}),_c('v-textarea',{attrs:{\"label\":\"商品描述\",\"prepend-icon\":\"mdi-note\",\"rules\":[_vm.rules.required]},model:{value:(_vm.good.description),callback:function ($$v) {_vm.$set(_vm.good, \"description\", $$v)},expression:\"good.description\"}}),_c('v-text-field',{attrs:{\"rules\":[_vm.rules.required, _vm.rules.numical],\"label\":\"商品价格\",\"prepend-icon\":\"mdi-cash-usd\",\"required\":\"\"},model:{value:(_vm.good.price),callback:function ($$v) {_vm.$set(_vm.good, \"price\", $$v)},expression:\"good.price\"}}),_c('v-icon',[_vm._v(\"mdi-camera\")]),_c('v-btn',{attrs:{\"color\":\"#FFD600\",\"small\":\"\"},on:{\"click\":function($event){_vm.crop.show = !_vm.crop.show}}},[_vm._v(\"上传图片\")]),(_vm.crop.list.length > 0)?_c('v-list',_vm._l((_vm.crop.list),function(item){return _c('v-list-item',{key:item},[_c('v-list-item-content',[_c('v-img',{attrs:{\"src\":'http://fdfs.ikarosx.cn:8888/' + item,\"max-width\":\"480\"}})],1),_c('v-list-item-action',[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.deleteFile(item)}}},[_c('v-icon',{attrs:{\"color\":\"grey lighten-1\"}},[_vm._v(\"mdi-close\")])],1)],1)],1)}),1):_vm._e()],1)],1),_c('v-card-actions',[_c('div',{staticClass:\"flex-grow-1\"}),_c('v-btn',{attrs:{\"color\":\"#FFD600\"},on:{\"click\":_vm.insertGood}},[_vm._v(\"发布\")])],1)],1)],1)],1),_c('image-upload',{attrs:{\"field\":\"file\",\"width\":480,\"height\":270,\"url\":\"http://gateway.budingcc.cn:30000/api/filesystem/upload\",\"params\":_vm.crop.params,\"headers\":_vm.crop.headers,\"img-format\":\"png\",\"langExt\":_vm.crop.langExt,\"noCircle\":true,\"noSquare\":false},on:{\"src-file-set\":_vm.srcFileSet,\"crop-success\":_vm.cropSuccess,\"crop-upload-success\":_vm.cropUploadSuccess,\"crop-upload-fail\":_vm.cropUploadFail},model:{value:(_vm.crop.show),callback:function ($$v) {_vm.$set(_vm.crop, \"show\", $$v)},expression:\"crop.show\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-main>\r\n    <v-img\r\n      src=\"@/assets/img/1.png\"\r\n      class=\"bdBackground\"\r\n      height=\"100%\"\r\n      width=\"100%\"\r\n      v-if=\"!update\"\r\n    ></v-img>\r\n    <v-container>\r\n      <v-row justify=\"center\">\r\n        <v-col>\r\n          <v-card>\r\n            <v-card-text>\r\n              <v-card-title>{{\r\n                update ? \"修改商品\" : \"发布商品\"\r\n              }}</v-card-title>\r\n              <v-form v-model=\"valid\" ref=\"form\">\r\n                <v-text-field\r\n                  v-model=\"good.goodName\"\r\n                  :counter=\"20\"\r\n                  :rules=\"[rules.required, rules.notSpecial]\"\r\n                  label=\"商品名称\"\r\n                  prepend-icon=\"mdi-pig-variant\"\r\n                  required\r\n                ></v-text-field>\r\n                <!-- 商品分类 -->\r\n                <v-icon>mdi-file-tree</v-icon>\r\n                <el-cascader\r\n                  :options=\"category.categoryList\"\r\n                  v-model=\"category.categoryActive\"\r\n                  placeholder=\"请选择分类\"\r\n                  :props=\"category.props\"\r\n                ></el-cascader>\r\n                <v-textarea\r\n                  v-model=\"good.description\"\r\n                  label=\"商品描述\"\r\n                  prepend-icon=\"mdi-note\"\r\n                  :rules=\"[rules.required]\"\r\n                ></v-textarea>\r\n                <v-text-field\r\n                  v-model=\"good.price\"\r\n                  :rules=\"[rules.required, rules.numical]\"\r\n                  label=\"商品价格\"\r\n                  prepend-icon=\"mdi-cash-usd\"\r\n                  required\r\n                ></v-text-field>\r\n                <v-icon>mdi-camera</v-icon>\r\n                <v-btn color=\"#FFD600\" @click=\"crop.show = !crop.show\" small\r\n                  >上传图片</v-btn\r\n                >\r\n                <v-list v-if=\"crop.list.length > 0\">\r\n                  <v-list-item v-for=\"item in crop.list\" :key=\"item\">\r\n                    <v-list-item-content>\r\n                      <v-img\r\n                        :src=\"'http://fdfs.ikarosx.cn:8888/' + item\"\r\n                        max-width=\"480\"\r\n                      ></v-img>\r\n                    </v-list-item-content>\r\n                    <v-list-item-action>\r\n                      <v-btn icon @click=\"deleteFile(item)\">\r\n                        <v-icon color=\"grey lighten-1\">mdi-close</v-icon>\r\n                      </v-btn>\r\n                    </v-list-item-action>\r\n                  </v-list-item>\r\n                </v-list>\r\n              </v-form>\r\n            </v-card-text>\r\n            <v-card-actions>\r\n              <div class=\"flex-grow-1\"></div>\r\n              <v-btn color=\"#FFD600\" @click=\"insertGood\">发布</v-btn>\r\n            </v-card-actions>\r\n          </v-card>\r\n        </v-col>\r\n      </v-row>\r\n      <image-upload\r\n        field=\"file\"\r\n        @src-file-set=\"srcFileSet\"\r\n        @crop-success=\"cropSuccess\"\r\n        @crop-upload-success=\"cropUploadSuccess\"\r\n        @crop-upload-fail=\"cropUploadFail\"\r\n        v-model=\"crop.show\"\r\n        :width=\"480\"\r\n        :height=\"270\"\r\n        url=\"http://gateway.budingcc.cn:30000/api/filesystem/upload\"\r\n        :params=\"crop.params\"\r\n        :headers=\"crop.headers\"\r\n        img-format=\"png\"\r\n        :langExt=\"crop.langExt\"\r\n        :noCircle=\"true\"\r\n        :noSquare=\"false\"\r\n      ></image-upload>\r\n    </v-container>\r\n  </v-main>\r\n</template>\r\n<script>\r\nimport qs from \"qs\";\r\nimport { Cascader } from \"element-ui\";\r\nimport \"element-ui/lib/theme-chalk/index.css\";\r\nimport ImageUpload from \"vue-image-crop-upload\";\r\nimport * as shopApi from \"../api\";\r\nexport default {\r\n  components: {\r\n    \"el-cascader\": Cascader,\r\n    \"image-upload\": ImageUpload,\r\n  },\r\n  created() {\r\n    this.loadGoodCategory();\r\n    this.changeGood();\r\n  },\r\n  name: \"good\",\r\n  watch: {\r\n    good() {\r\n      this.changeGood();\r\n    },\r\n  },\r\n  props: {\r\n    update: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: \"发布商品\",\r\n    },\r\n    good: {\r\n      type: Object,\r\n      default: () => {\r\n        return {\r\n          goodName: \"\",\r\n          description: \"\",\r\n          directCategoryId: \"\",\r\n          price: \"\",\r\n          imageUrl: \"\",\r\n          userId: \"8a80cb81704365b5017043674de40006\", // TODO\r\n          username: \"\",\r\n          schoolId: \"1\",\r\n        };\r\n      },\r\n    },\r\n  },\r\n  computed: {},\r\n  data() {\r\n    return {\r\n      category: {\r\n        categoryList: [],\r\n        categoryActive: [],\r\n        props: {\r\n          expandTrigger: \"hover\",\r\n          value: \"id\",\r\n          label: \"name\",\r\n          children: \"children\",\r\n          // 任意一项\r\n          checkStrictly: false,\r\n        },\r\n      },\r\n      crop: {\r\n        show: false,\r\n        params: {\r\n          businessKey: \"goodImage\",\r\n          fileName: \"fileName\",\r\n        },\r\n        headers: {\r\n          smail: \"*_~\",\r\n          Authorization: \"Bearer \" + localStorage.getItem(\"access_token\")\r\n        },\r\n        langExt: {\r\n          preview: \"图片预览\",\r\n        },\r\n        list: [],\r\n      },\r\n      valid: \"\",\r\n      rules: {\r\n        required: (value) => !!value || \"不能为空\",\r\n        notSpecial: (v) =>\r\n          /^[a-zA-Z0-9\\u4e00-\\u9fa5]+$/.test(v) || \"只能包含字母、数字或中文\",\r\n        numical: (v) => /^[0-9]{1}[0-9]*[.]?[0-9]*$/.test(v) || \"价格格式错误\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    srcFileSet(fileName, fileType, fileSize) {\r\n      this.crop.params.fileName = fileName;\r\n    },\r\n    changeGood() {\r\n      var imageUrl = this.good.imageUrl;\r\n      if (imageUrl && imageUrl != \"\") {\r\n        this.crop.list = imageUrl.split(\",\");\r\n      }\r\n      var directCategoryId = this.good.directCategoryId;\r\n      if (directCategoryId && directCategoryId != \"\") {\r\n        this.category.categoryActive = this.convertCategoryActive(\r\n          directCategoryId\r\n        );\r\n      }\r\n    },\r\n    convertCategoryActive(directCategoryId) {\r\n      // \"1-1-1\"\r\n      var arrays = directCategoryId.split(\"-\");\r\n      for (let i = 1; i < arrays.length; i++) {\r\n        arrays[i] = arrays[i - 1] + \"-\" + arrays[i];\r\n      }\r\n      return arrays;\r\n      // [1,1-1,1-1-1]\r\n    },\r\n    cropSuccess(imgDataUrl, field) {\r\n      console.log(\"crop~~啦啦啦\");\r\n    },\r\n    cropUploadSuccess(jsonData, field) {\r\n      var json = qs.parse(jsonData);\r\n      console.log(json);\r\n      if (json.success) {\r\n        this.$message.success(\"上传图片成功\");\r\n        this.crop.list.push(json.data.path);\r\n        this.crop.show = false;\r\n      } else {\r\n        this.$message.error(json.message);\r\n        this.crop.show = false;\r\n      }\r\n    },\r\n    cropUploadFail(status, field) {\r\n      this.$message.error(\"上传图片失败\");\r\n    },\r\n    loadGoodCategory() {\r\n      shopApi\r\n        .listCategoryStruct()\r\n        .then((result) => {\r\n          if (result.success) {\r\n            this.category.categoryList = this.handleLeaf(\r\n              result.queryResult.list\r\n            );\r\n          } else {\r\n            this.$message.error(result.message);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          this.$message.error(err.message);\r\n        });\r\n    },\r\n    deleteFile(id) {\r\n      var params = { id: id };\r\n      this.crop.list = this.crop.list.filter((item) => item != id);\r\n      // shopApi\r\n      //   .deleteFile(params)\r\n      //   .then((result) => {\r\n      //     if (result.success) {\r\n      //       this.crop.list = this.crop.list.filter((item) => item != id);\r\n      //       this.$message.success(result.message);\r\n      //     } else {\r\n      //       this.$message.error(result.message);\r\n      //     }\r\n      //   })\r\n      //   .catch((err) => {\r\n      //     this.$message.error(err.message);\r\n      //   });\r\n    },\r\n    insertGood() {\r\n      if (!this.$refs.form.validate()) {\r\n        return;\r\n      }\r\n      if (\r\n        !this.category.categoryActive ||\r\n        this.category.categoryActive.length <= 1\r\n      ) {\r\n        this.$message.error(\"请选择商品分类，还有不要选择根节点da\");\r\n        return;\r\n      }\r\n      if (!this.crop.list || this.crop.list.length == 0) {\r\n        this.$message.error(\"请上传图片\");\r\n        return;\r\n      }\r\n      this.good.imageUrl = this.convertImgUrl();\r\n      this.good.directCategoryId = this.convertDirectCategoryId();\r\n      this.good.rootCategoryId = this.category.categoryActive[1];\r\n      shopApi\r\n        .insertGood(this.good)\r\n        .then((result) => {\r\n          if (result.success) {\r\n            this.$message.success(\"发布商品成功，请等待1-2分钟后台处理\");\r\n            this.crop.list = [];\r\n            this.$refs[\"form\"].reset();\r\n          } else {\r\n            this.$message.error(result.message);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          this.$message.error(err.message);\r\n        });\r\n    },\r\n    convertDirectCategoryId() {\r\n      var len = this.category.categoryActive.length;\r\n      return this.category.categoryActive[len - 1];\r\n    },\r\n    convertImgUrl() {\r\n      var imgUrl = \"\";\r\n      for (let index in this.crop.list) {\r\n        let url = this.crop.list[index];\r\n        if (url && url != \"\") {\r\n          imgUrl += this.crop.list[index] + \",\";\r\n        }\r\n      }\r\n      imgUrl = imgUrl.substring(0, imgUrl.length - 1);\r\n      return imgUrl;\r\n    },\r\n    handleLeaf(json) {\r\n      for (let i = 0; i < json.length; i++) {\r\n        if (!json[i].children || json[i].children.length < 1) {\r\n          json[i].children = undefined;\r\n        } else {\r\n          this.handleLeaf(json[i].children);\r\n        }\r\n      }\r\n      return json;\r\n    },\r\n  },\r\n};\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Good.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Good.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Good.vue?vue&type=template&id=24dce7fe&\"\nimport script from \"./Good.vue?vue&type=script&lang=js&\"\nexport * from \"./Good.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAction } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VMain } from 'vuetify/lib/components/VMain';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VCol,VContainer,VForm,VIcon,VImg,VList,VListItem,VListItemAction,VListItemContent,VMain,VRow,VTextField,VTextarea})\n","import http from \"@/base/api/public\";\r\nimport querystring from \"querystring\";\r\nimport { systemConfig } from \"@/../config/system\";\r\nlet gatewayApiUrl = systemConfig.gatewayApiUrl;\r\nexport const listCategoryStruct = () => {\r\n    return http.requestGet(gatewayApiUrl + \"/api/shop/category/struct\");\r\n};\r\n\r\nexport const listGoods = (page, size, params) => {\r\n    let query = querystring.stringify(params);\r\n    return http.requestGet(\r\n        gatewayApiUrl +\r\n            \"/api/es/good/list/\" +\r\n            page +\r\n            \"/\" +\r\n            size +\r\n            \"?time=\" +\r\n            new Date().valueOf() +\r\n            \"&\" +\r\n            query\r\n    );\r\n};\r\n\r\nexport const deleteFile = (params) => {\r\n    let query = querystring.stringify(params);\r\n    return http.requestDelete(gatewayApiUrl + \"/api/filesystem?\" + query);\r\n};\r\n\r\nexport const insertGood = (params) => {\r\n    return http.requestPost(gatewayApiUrl + \"/api/shop/good\", params);\r\n};\r\n\r\nexport const deleteGood = (id) => {\r\n    return http.requestDelete(gatewayApiUrl + \"/api/shop/good/\" + id);\r\n};\r\n\r\nexport const deleteGoods = (ids) => {\r\n    return http.requestDelete(gatewayApiUrl + \"/api/shop/good/list/\" + ids);\r\n};\r\n"],"sourceRoot":""}